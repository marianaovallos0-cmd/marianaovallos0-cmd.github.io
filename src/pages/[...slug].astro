---
import { getCollection, type CollectionEntry } from "astro:content";
import Page from "../templates/Page.astro";

export async function getStaticPaths() {
  const pages = await getCollection("pages");
  const sql = await getCollection("sql");

  const pagePaths = pages.map((page) => ({
    params: { slug: page.slug },
    props: { entry: page, type: "page" },
  }));

  const sqlPaths = sql.map((script) => ({
    params: { slug: `sql/${script.slug}` },
    props: { entry: script, type: "sql" },
  }));

  return [...pagePaths, ...sqlPaths];
}


interface Props {
  entry: CollectionEntry<any>;
  type: string;
}

const { entry, type } = Astro.props;
---

{type === "page" && <Page entry={entry} />}

{type === "sql" && (
  <Page entry={entry} />
)}
